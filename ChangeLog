2003-04-30  root  <root@dancy>

	* deliver.cl:  write-message-to-stream:  headers that spanned
	lines weren't being written out w/ the proper EOL convention.
	Fixed.  

	* queue-process.cl: Rearranged some code in the queue processing
	function for better status reporting.    Minor changes to the
	queue lister.  Added a queue processing daemon.

	* queue.cl:  Added new 'valid' slot to the queue struct.  It is
	used by the new with-new-queue macro.  If the slot is still nil
	when the macro completes, the queue file will be deleted.  This
	effects cleanup for interrupted message transmissions, etc.

	* security.cl:  verify-root: new function to check that the real
	user is root.
	
	* input.cl: send-from-stdin:  Try out new with-new-queue macro.

	* maild.cl: main:  Implemented more of the command line args.  Can
	run in daemon mode now w/ optional periodic queue processing.
	Signal handlers added for SIGINT and SIGTERM for clean shutdown.
	Security checks on queue-manipulating commands.  

	* smtp-server.cl:  New smtp-server-daemon function.

2003-04-28  root  <root@dancy>

	* config.cl: Added *smtp-ip* parameter for binding the server
	socket to a particular interface.

	* smtp-server.cl:  Use the new *smtp-ip* parameter

	* deliver-smtp.cl:  Added :verbose keyword arg to many of the
	functions so that the SMTP transaction can be watched (ala
	sendmail -v).   Also added a with-socket-timeout around the main
	function so that an unresponsive SMTP server doesn't make us hang.

	* deliver.cl:  New write-message-to-stream-async for use with
	send-message-to-program.  It is intended to be called via
	mp:process-run-function.  It takes a structure which has the usual
	arguments to write-message-to-stream.. plus a gate and a status
	field for returning information to the caller.

	* queue-process.cl:  Added :verbose keyword stuff.  Also, the
	queue processor now collects the error messages from the delivery
	subroutines for storage in the queue file.  

2003-04-24  root  <root@dancy>

	* config.cl:  Call local delivery program w/ -f.
	Added comments to the timeouts section.

	* sockets are now hiper sockets so that I can use read and write
	timeouts w/ ease.

	


